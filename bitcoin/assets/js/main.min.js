/**
 * CoinCompare - Cryptocurrencies Market Cap
 * ---------------------------------------------
 * Version 1.4.0, built on Wednesday, March 21, 2018
 * Copyright (c) Financial Apps and Plugins <info@financialplugins.com>. All rights reserved.
 * Demo: http://financialplugins.com/products/coincompare-cryptocurrency-market-cap
 * Purchase: https://codecanyon.net/item/coincompare-cryptocurrency-market-capitalization/20898327?ref=financialtechnology
 * Like: https://www.facebook.com/financialplugins/
 */
"use strict";function RealTimeDataFeed(e){function n(){t()?log("SOCKET connection already established"):(log("Making SOCKET connection to "+f),l=io.connect(f),l.on("m",a),l.on("connect",o),l.on("disconnect",i),s(e.subs))}function t(){return!("undefined"==typeof l||"undefined"==typeof l.connected||!l.connected)}function o(){log("SOCKET connection OPEN"),"function"==typeof e.onConnect&&e.onConnect()}function a(n){var t,o=n.substr(0,n.indexOf("~"));o==u.TRADE?(t=c(n),"function"==typeof e.onTrade&&e.onTrade(t)):o==u.CURRENTAGG&&(t=r(n),"function"==typeof e.onAggQuote&&e.onAggQuote(t))}function i(){log("SOCKET connection CLOSED")}function s(e){log("SOCKET subscribe",e),l.emit("SubAdd",{subs:e})}function r(e){var n=e.split("~"),t=n.length,o=n[t-1],a=parseInt(o,16),i={},s=0;for(var r in d)0===d[r]?(i[r]=n[s],s++):a&d[r]&&("LASTMARKET"===r?i[r]=n[s]:i[r]=parseFloat(n[s]),s++);return i}function c(e){var n=e.split("~"),t=n.length,o=n[t-1],a=parseInt(o,16),i={},s=0;for(var r in p)0===p[r]?(i[r]=n[s],s++):a&p[r]&&(i[r]=n[s],s++);return"undefined"!=typeof i.F&&1&i.F?i.TYPE="buy":"undefined"!=typeof i.F&&2&i.F?i.TYPE="sell":i.TYPE="unknown",i}var l,u={TRADE:"0",FEEDNEWS:"1",CURRENT:"2",LOADCOMPLATE:"3",COINPAIRS:"4",CURRENTAGG:"5",TOPLIST:"6",TOPLISTCHANGE:"7",ORDERBOOK:"8",FULLORDERBOOK:"9",ACTIVATION:"10",TRADECATCHUP:"100",NEWSCATCHUP:"101",TRADECATCHUPCOMPLETE:"300",NEWSCATCHUPCOMPLETE:"301"},d={TYPE:0,MARKET:0,FROMSYMBOL:0,TOSYMBOL:0,FLAGS:0,PRICE:1,BID:2,OFFER:4,LASTUPDATE:8,AVG:16,LASTVOLUME:32,LASTVOLUMETO:64,LASTTRADEID:128,VOLUMEHOUR:256,VOLUMEHOURTO:512,VOLUME24HOUR:1024,VOLUME24HOURTO:2048,OPENHOUR:4096,HIGHHOUR:8192,LOWHOUR:16384,OPEN24HOUR:32768,HIGH24HOUR:65536,LOW24HOUR:131072,LASTMARKET:262144},p={T:0,M:0,FSYM:0,TSYM:0,F:0,ID:1,TS:2,Q:4,P:8,TOTAL:16},f="wss://streamer.cryptocompare.com",m=e.subs||"";return m&&n(),{subscribe:s}}function log(){DEBUG&&console.log("CMC",arguments)}function deleteFromArray(e,n){for(var t=e.length,o=0;o<t;o++)if(e[o]==n){e.splice(o,1);break}}function formatDecimal(e){if("undefined"!=typeof numeral){var n,t=numeral(e),o=Math.abs(t.value());o>.01?n="0,0.00":1e-4<o&&o<.01?n="0.0000":1e-6<o&&o<1e-4?n="0.000000":o<1e-6&&(n="0.00000000");var a=t.format(n);return"NaN"!==a?a:parseFloat(e).toFixed(8)}return e}function formatPercentage(e){if("undefined"!=typeof numeral){var n,t=numeral(e),o=100*Math.abs(t.value());o>.01?n="0,0.00%":1e-4<o&&o<.01?n="0.0000%":1e-6<o&&o<1e-4?n="0.000000%":o<1e-6&&(n="0.00000000%");var a=t.format(n);return"NaN"!==a?a:parseFloat(e).toFixed(2)}return e}function handleAjaxError(e,n,t){console.error("handleAjaxError",n+"|"+t)}$(document).ready(function(){var e=$("#search-coins"),n=window.innerWidth>0?window.innerWidth:screen.width;numeral.register("locale","custom",{delimiters:{thousands:THOUSANDS_SEPARATOR,decimal:DECIMAL_POINT},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){return""},currency:{symbol:DISPLAY_CURRENCY?DISPLAY_CURRENCY.code:""}}),numeral.locale("custom"),$.fn.destroyDataTable=function(){this.hasClass("dataTable")&&this.DataTable().destroy()},$.fn.initDataTable=function(e,n,t,o,a,i){e=e||15,n=n||[],t=t||!1,o=o||function(){},i=i||!1;var s,r=this,c=0;if(r.hasClass("dataTable")){s=r.DataTable();var l=s.page.info(),n=s.order();c=l.page,n=[[n[0][0],n[0][1]]],s.destroy()}return s=r.DataTable({bLengthChange:!1,pageLength:e,displayStart:c*e,bFilter:t,oLanguage:TEXT.datatables,order:n,info:!1,footerCallback:function(){if("undefined"!=typeof a){var e=Array.prototype.slice.call(arguments);e.push(a),o.apply(this,e)}else o.apply(this)},initComplete:function(e,n){r.is(":visible")||r.show()},dom:"Bfrtip",buttons:i}),t&&r.closest(".dataTables_wrapper").find(".dataTables_filter").addClass("ui icon small input").append('<i class="search icon"></i>'),i&&r.closest(".dataTables_wrapper").find(".buttons-csv").addClass("ui basic icon button").prepend('<i class="file excel outline icon"></i> '),s},"undefined"!=typeof $.fn.select2&&($.fn.initCoinsSearchAutocomplete=function(e,n){return this.select2({placeholder:e,width:n||"100%",containerCssClass:"select2-selection-"+this.attr("id"),dropdownCssClass:"select2-dropdown-"+this.attr("id"),ajax:{url:function(e){return API.coinsSearch+"/"+e.term},dataType:"json",delay:250,processResults:function(e,n){return log("autocomplete",e),n.page=n.page||1,{results:e.search}},cache:!0},language:TEXT.select2,escapeMarkup:function(e){return e},minimumInputLength:2,templateResult:function(e){return e.loading?e.name:'<div class="symbol-search-row"><img src="assets/images/coins/thumb30/'+e.logo+'"><span class="symbol-search-name">'+e.name+'</span><span class="symbol-search-symbol">'+e.id+"</span></div>"},templateSelection:function(e){return e.name||e.text||e.id}}).on("select2:unselect",function(e){"undefined"!=typeof e.params.data.id&&$(this).find('option[value="'+e.params.data.id+'"]').remove()})}),"undefined"!=typeof $.fn.sparkline&&($.fn.displaySparklineCharts=function(){return this.sparkline("html",{type:"line",lineColor:COLOR_CODE,fillColor:!1,minSpotColor:!1,maxSpotColor:!1,spotColor:COLOR_CODE,highlightSpotColor:COLOR_CODE,spotRadius:0,height:"2rem",width:"10rem",numberDigitGroupSep:THOUSANDS_SEPARATOR,numberDecimalMark:DECIMAL_POINT}).addClass("sparkline-added")}),$("#menu-button").sideNav(),"undefined"==typeof Cookies&&REQUIRE_COOKIE_ACCEPTANCE&&"undefined"==typeof Cookies.get("cookie_policy")&&(setTimeout(function(){$("#cookie-notice").removeClass("scale-out").addClass("scale-in")},1e3),$("#accept-cookies-usage").on("click",function(){Cookies.set("cookie_policy","accept",{expires:365}),$("#cookie-notice").removeClass("scale-in").addClass("scale-out")})),e.length&&(e.initCoinsSearchAutocomplete(null,(n>=500?300:.4*n)+"px"),e.on("select2:closing",function(e){$(".select2-dropdown-search-coins").css({opacity:0})}).on("change",function(){var e=$(this),n=e.val();window.location.href=COIN_PAGE_SLUG+n})),$(".button-collapse").sideNav(),$(".dropdown-button").dropdown(),$("ul.tabs").tabs(),$(".modal").modal(),$("#search-coins-button").on("click",function(){e.select2("open"),$(".select2-dropdown-search-coins").animate({opacity:1})}),$(".copy-address-button").on("click",function(){var e=$(this).closest(".row").find("input").select();e.copyToClipboard()}),$.fn.copyToClipboard=function(){this.select();try{document.execCommand("copy")}catch(e){log("Copy to clipboard is not supported")}return document.getSelection().removeAllRanges(),this},$(".currency-symbol").on("click",function(){var e=$(this);$('<form method="POST" action="'+BASE_PATH+'/"><input type="hidden" name="currency" value="'+e.data("symbol")+'"><input type="hidden" name="path" value="'+PATH+'"></form>').appendTo("body").submit()}),$(".language-code").on("click",function(){var e=$(this);$('<form method="POST" action="'+BASE_PATH+'/"> <input type="hidden" name="language" value="'+e.data("language")+'"> <input type="hidden" name="path" value="'+PATH+'"></form>').appendTo("body").submit()}),"undefined"!=typeof $.fn.dataTable&&($.fn.dataTable.ext.classes.sPageButton="waves-effect btn btn-small")}),Array.prototype.subtract=function(e){return this.filter(function(n){return e.indexOf(n)<0})};